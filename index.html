<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>رحلتي في الإسلامية</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #006633;
            --primary-dark: #004422;
            --secondary-color: #fdd835;
            --light-bg: #e6f3ee;
            --correct-color: #28a745;
            --incorrect-color: #dc3545;
            --info-color: #17a2b8;
            --font-family: 'Cairo', sans-serif;
            --text-dark: #333;
            --text-light: #555;
            --white-color: #fff;
            --border-radius-main: 15px;
        }

        body {
            font-family: var(--font-family);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: var(--text-dark);
            padding: 10px;
            box-sizing: border-box;
            background-image: url('Ferst.webp');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(240, 244, 248, 0.85);
            z-index: -1;
        }

        .game-container {
            width: 100%;
            max-width: 800px;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        #landing-screen {
            background-color: transparent;
            padding: 30px 40px;
            border-radius: 0;
            box-shadow: none;
            text-align: center;
            animation: fadeInUp 0.6s ease-out;
            width: 100%;
        }

        .logo {
            max-width: 150px;
            margin-bottom: 20px;
        }

        h1 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 32px;
            line-height: 1.4;
            font-weight: 700;
        }

        .subtitle {
            font-size: 18px;
            color: var(--text-light);
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .features-grid {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 40px;
        }

        .feature-card {
            background-color: var(--white-color);
            padding: 25px;
            border-radius: var(--border-radius-main);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
            width: calc(33.33% - 20px);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .feature-card .icon {
            font-size: 48px;
            color: var(--primary-color);
            display: block;
            margin-bottom: 15px;
        }

        .feature-card h3 {
            color: var(--primary-color);
            font-size: 20px;
            margin-bottom: 10px;
        }

        .feature-card p {
            font-size: 14px;
            color: #777;
            line-height: 1.5;
            margin: 0;
        }
        
        .reset-link-container {
            margin-top: 20px;
            font-size: 14px;
        }
        .reset-link-container a {
            color: var(--text-light);
            text-decoration: none;
        }
        .reset-link-container a:hover {
            text-decoration: underline;
            color: var(--primary-color);
        }

        #start-screen {
            background-color: var(--white-color);
            padding: 30px 40px;
            border-radius: var(--border-radius-main);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
            animation: fadeInUp 0.6s ease-out;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: right;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--primary-dark);
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 16px;
            font-family: var(--font-family);
        }

        .action-button {
            width: 100%;
            max-width: 350px;
            padding: 15px;
            border: none;
            border-radius: 30px;
            background-color: var(--primary-color);
            color: var(--white-color);
            font-size: 18px;
            font-weight: bold;
            font-family: var(--font-family);
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin: 0 auto;
        }

        .action-button:hover {
            background-color: var(--primary-dark);
            transform: scale(1.02);
        }

        .action-button:disabled {
            background-color: var(--text-light);
            cursor: not-allowed;
        }
        
        .btn-icon {
            transform: scaleX(-1);
        }

        .hidden {
            display: none !important;
        }

        #player-stats {
            position: fixed;
            top: 15px;
            left: 15px;
            background-color: rgba(0, 68, 34, 0.9);
            color: var(--white-color);
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            z-index: 50;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            display: flex;
            gap: 10px;
            align-items: center;
        }

        #player-score {
            background-color: var(--secondary-color);
            color: var(--text-dark);
            padding: 5px 10px;
            border-radius: 5px;
        }
        
        #logout-btn, #back-to-map-btn {
            background-color: rgba(255, 255, 255, 0.15);
            color: #fff;
            text-decoration: none;
            padding: 4px 10px;
            border-radius: 5px;
            font-size: 12px;
            font-weight: normal;
            transition: background-color 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            gap: 5px;
        }
        #logout-btn:hover {
            background-color: var(--incorrect-color);
            border-color: var(--incorrect-color);
        }
        #back-to-map-btn:hover {
            background-color: var(--info-color);
            border-color: var(--info-color);
        }

        .game-stage {
            background-color: var(--white-color);
            padding: 0;
            border-radius: var(--border-radius-main);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
            width: 100%;
            box-sizing: border-box;
            overflow: hidden;
            animation: fadeInUp 0.6s ease-out;
        }

        .scene-image {
            width: 100%;
            height: auto;
            display: block;
        }

        .scene-content {
            padding: 25px;
        }

        .scene-title {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-dark);
            margin-bottom: 20px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 25px;
        }

        .option-btn {
            position: relative;
            padding: 15px 10px;
            border: 2px solid var(--primary-color);
            background-color: var(--white-color);
            color: var(--primary-color);
            font-size: 16px;
            font-weight: bold;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            height: 100%;
            opacity: 0;
            animation: fadeIn 0.5s ease-out forwards;
        }

        .option-btn:hover {
            background-color: var(--light-bg);
            transform: translateY(-2px);
        }

        .option-btn.correct {
            background-color: var(--correct-color);
            color: var(--white-color);
            border-color: var(--correct-color);
        }
        .option-btn.correct:hover {
            background-color: var(--correct-color);
        }
        .option-btn.incorrect {
            background-color: var(--incorrect-color);
            color: var(--white-color);
            border-color: var(--incorrect-color);
        }
        .option-btn.incorrect:hover {
            background-color: var(--incorrect-color);
        }
        
        .option-btn.correct::before, .option-btn.incorrect::before {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 24px;
        }

        .option-btn.correct::before { content: '✓'; }
        .option-btn.incorrect::before { content: '✗'; }

        .feedback-message {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            color: var(--white-color);
            display: none;
        }

        .feedback-message.correct { background-color: var(--correct-color); }
        .feedback-message.incorrect { background-color: var(--incorrect-color); }
        .feedback-message.info { background-color: var(--info-color); }

        .modal {
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            direction: rtl;
        }

        .modal-content {
            background-color: var(--white-color);
            padding: 30px;
            border-radius: var(--border-radius-main);
            text-align: center;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            animation: slide-down 0.4s ease-out;
        }

        @keyframes slide-down {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translate3d(0, 30px, 0); }
            to { opacity: 1; transform: translate3d(0, 0, 0); }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content h2 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        .modal-content p {
            color: var(--text-light);
            font-size: 16px;
        }
        
        #map-scene .options-container .option-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 18px;
            padding: 25px 15px;
        }

        .map-icon {
            font-size: 36px;
            margin-bottom: 5px;
        }

        /* تحسينات شريط التقدم */
        .progress-bar-container {
            width: 90%;
            background-color: #e0e0e0;
            border-radius: 10px; /* حواف دائرية */
            overflow: hidden;
            height: 18px; /* زيادة الارتفاع */
            margin: 10px auto 20px;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1); /* ظل داخلي */
            position: relative;
        }
        
        .progress-bar {
            height: 100%;
            width: 0;
            background-color: var(--primary-color);
            transition: width 0.5s ease;
            border-radius: 10px;
            position: relative;
        }

        .progress-text {
            position: absolute;
            width: 100%;
            text-align: center;
            color: var(--white-color);
            font-size: 12px;
            font-weight: bold;
            top: 50%;
            transform: translateY(-50%);
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
            z-index: 2;
        }


        #faculties-scene .options-container,
        #exchange-scene .options-container,
        #admission-scene .options-container {
            grid-template-columns: 1fr;
            max-width: 400px;
            margin: 25px auto 0;
        }

        #faculties-scene .option-btn,
        #exchange-scene .option-btn,
        #admission-scene .option-btn {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            padding: 20px;
            gap: 20px;
            font-size: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        #faculties-scene .option-btn:hover,
        #exchange-scene .option-btn:hover,
        #admission-scene .option-btn:hover {
            transform: scale(1.03);
            background-color: var(--primary-color);
            color: var(--white-color);
        }

        #faculties-scene .option-btn span,
        #exchange-scene .option-btn span,
        #admission-scene .option-btn span {
            font-size: 30px;
        }

        #grants-info-scene .scene-content,
        #faculties-info-scene .scene-content {
            padding: 0;
        }

        .info-header {
            padding: 25px 25px 20px 25px;
            border-bottom: 1px solid #eee;
        }
        
        .info-scene-container {
            max-height: 60vh;
            overflow-y: auto;
            padding: 20px 25px;
            text-align: right;
        }
        
        .grant-category,
        .exchange-category {
            font-size: 22px;
            font-weight: bold;
            color: var(--primary-dark);
            margin-top: 20px;
            margin-bottom: 15px;
            padding-bottom: 5px;
            border-bottom: 2px solid var(--primary-color);
        }
        .grant-category:first-child,
        .exchange-category:first-child {
            margin-top: 0;
        }
        /* بداية التعديل */
        .grant-card,
        .exchange-card {
            background-color: #f9f9f9;
            border-right: 5px solid var(--primary-color);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-right-color 0.3s ease;
        }
        .grant-card:hover,
        .exchange-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.12);
            border-right-color: var(--secondary-color);
        }
        /* نهاية التعديل */
        .grant-card h3,
        .exchange-card h3 {
            margin: 0 0 10px 0;
            font-size: 18px;
            color: var(--primary-dark);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .grant-percentage,
        .exchange-project {
            background-color: var(--secondary-color);
            color: var(--text-dark);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 16px;
            font-weight: bold;
        }

        .grant-details ul,
        .exchange-details ul {
            list-style: none;
            padding-right: 0;
            margin: 0;
            font-size: 14px;
            color: var(--text-light);
        }

        .grant-details li,
        .exchange-details li {
            padding-right: 25px;
            position: relative;
            margin-bottom: 8px;
        }
        .grant-details li::before,
        .exchange-details li::before {
            content: '🔹';
            position: absolute;
            right: 0;
            top: 0;
            color: var(--primary-color);
        }

        .info-footer {
            padding: 20px 25px;
            border-top: 1px solid #eee;
        }
        
        #faculties-info-scene .info-scene-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            text-align: center;
        }

        .college-card {
            background-color: #f9f9f9;
            border-top: 5px solid var(--primary-color);
            border-radius: var(--border-radius-main);
            padding: 25px 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .college-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.12);
        }

        .college-icon {
            font-size: 48px;
            margin-bottom: 15px;
            color: var(--primary-dark);
        }
        
        .college-card h3 {
            margin: 0 0 10px 0;
            font-size: 20px;
            color: var(--primary-color);
        }

        .college-card p {
            font-size: 15px;
            color: var(--text-light);
            line-height: 1.6;
            margin: 0;
        }
        
        #faculties-list-scene .info-scene-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            text-align: right;
        }

        .college-info-card {
            background-color: #f9f9f9;
            border-right: 5px solid var(--primary-color);
            border-radius: var(--border-radius-main);
            padding: 25px 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .college-info-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.12);
            border-right-color: var(--secondary-color);
        }

        .college-info-card h3 {
            margin: 0 0 10px 0;
            font-size: 20px;
            color: var(--primary-dark);
        }

        .college-info-card p {
            font-size: 15px;
            color: var(--text-light);
            line-height: 1.6;
            margin: 0;
        }

        #college-website-scene .scene-content {
            padding: 20px;
            height: 85vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .website-view-header {
            margin-bottom: 15px;
            display: flex;
            justify-content: flex-end;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div id="landing-screen" class="screen">
            <img src="https://i.ibb.co/6P6Xg4j/Logo.webp" alt="رحلتي في الإسلامية" class="logo">
            <h1>رحلتك في الجامعة الإسلامية</h1>
            <p class="subtitle">استكشف الجامعة الإسلامية من خلال لعبة تفاعلية مليئة بالأسئلة والمغامرات، تعرّف على كلياتها، برامجها، ومنحها الدراسية!</p>
            <div class="features-grid">
                <div class="feature-card">
                    <span class="icon">🏛️</span>
                    <h3>استكشف الكليات</h3>
                    <p>اكتشف تخصصات مختلفة واختر الأنسب لك.</p>
                </div>
                <div class="feature-card">
                    <span class="icon">🎓</span>
                    <h3>تعرف على المنح</h3>
                    <p>تعرف على المنح الدراسية والبرامج المتاحة.</p>
                </div>
                <div class="feature-card">
                    <span class="icon">🤔</span>
                    <h3>اختبر معلوماتك</h3>
                    <p>أجب عن الأسئلة واجمع النقاط.</p>
                </div>
            </div>
            <button class="action-button" onclick="showStartScreen()">
                ابدأ رحلتك
                <span class="btn-icon">🚀</span>
            </button>
            <div class="reset-link-container">
                <a href="#" onclick="resetGame()">إعادة ضبط اللعبة</a>
            </div>
        </div>

        <div id="start-screen" class="screen hidden">
            <h2>أدخل اسمك لتبدأ</h2>
            <div class="form-group">
                <label for="playerName">اسم الطالب:</label>
                <input type="text" id="playerName" placeholder="اكتب اسمك هنا..." autocomplete="off">
            </div>
            <button id="startButton" class="action-button" disabled>
                هيا بنا
                <span class="btn-icon">➡️</span>
            </button>
        </div>

        <div id="main-game" class="screen hidden">
            <div id="player-stats">
                <span id="player-name-display"></span>
                <span>النقاط: <span id="player-score">0</span></span>
                <a href="#" id="logout-btn" onclick="logout()">خروج</a>
            </div>
            
            <div class="progress-bar-container">
                <div class="progress-bar" id="progressBar"></div>
                <div class="progress-text" id="progressText"></div>
            </div>

            <div id="game-stages">
                <div id="map-scene" class="game-stage">
                    <img src="https://i.ibb.co/3Wf0z6W/Map.webp" alt="خريطة الجامعة" class="scene-image">
                    <div class="scene-content">
                        <h2 class="scene-title">أهلاً بك في الجامعة!</h2>
                        <p>ابدأ رحلتك من هنا. اختر وجهتك التالية.</p>
                        <div class="options-container">
                            <button class="option-btn" onclick="nextScene('grants-scene')">
                                <span class="map-icon">💰</span>
                                المنح الدراسية
                            </button>
                            <button class="option-btn" onclick="nextScene('exchange-scene')">
                                <span class="map-icon">✈️</span>
                                برامج التبادل
                            </button>
                            <button class="option-btn" onclick="nextScene('faculties-scene')">
                                <span class="map-icon">📚</span>
                                الكليات
                            </button>
                            <button class="option-btn" onclick="nextScene('admission-scene')">
                                <span class="map-icon">📝</span>
                                شروط القبول
                            </button>
                        </div>
                    </div>
                </div>

                <div id="faculties-scene" class="game-stage hidden">
                    <img src="https://i.ibb.co/Qk45z6H/Faculties.webp" alt="صورة الكليات" class="scene-image">
                    <div class="scene-content">
                        <h2 class="scene-title">استكشاف الكليات</h2>
                        <p>اختر الكلية التي تثير اهتمامك لتعرف عنها المزيد.</p>
                        <div class="options-container">
                            <button class="option-btn" onclick="showFacultyInfo('الشريعة والقانون')">
                                <span>⚖️</span>
                                كلية الشريعة والقانون
                            </button>
                            <button class="option-btn" onclick="showFacultyInfo('الهندسة')">
                                <span>⚙️</span>
                                كلية الهندسة
                            </button>
                            <button class="option-btn" onclick="showFacultyInfo('الطب')">
                                <span>⚕️</span>
                                كلية الطب
                            </button>
                            <button class="option-btn" onclick="showFacultyInfo('الآداب')">
                                <span>📖</span>
                                كلية الآداب
                            </button>
                            <button class="option-btn" onclick="showFacultyInfo('التجارة')">
                                <span>📈</span>
                                كلية التجارة
                            </button>
                        </div>
                        <div class="feedback-message" id="faculties-feedback"></div>
                        <button id="back-to-map-btn" class="action-button hidden" onclick="nextScene('map-scene')">
                            العودة للخريطة
                        </button>
                    </div>
                </div>

                <div id="faculties-info-scene" class="game-stage hidden">
                    <img src="https://i.ibb.co/3yC2T4b/Faculty-info.webp" alt="معلومات عن الكلية" class="scene-image">
                    <div class="scene-content">
                        <div class="info-header">
                            <h2 class="scene-title" id="faculty-info-title"></h2>
                            <p id="faculty-info-desc"></p>
                        </div>
                        <div class="info-scene-container" id="faculty-majors-container">
                            </div>
                        <div class="info-footer">
                            <button class="action-button" onclick="nextScene('faculties-scene')">
                                العودة للكليات
                                <span class="btn-icon">⬅️</span>
                            </button>
                        </div>
                    </div>
                </div>

                <div id="grants-scene" class="game-stage hidden">
                    <img src="https://i.ibb.co/GvxBqgK/Grants.webp" alt="صورة للمنح" class="scene-image">
                    <div class="scene-content">
                        <h2 class="scene-title">المنح الدراسية</h2>
                        <p>اختر المنحة التي ترغب بالتعرف عليها.</p>
                        <div class="options-container">
                            <button class="option-btn" onclick="showGrantInfo('منحة التفوق الأكاديمي')">
                                <span>🏆</span>
                                منحة التفوق الأكاديمي
                            </button>
                            <button class="option-btn" onclick="showGrantInfo('منحة الأسر المتعففة')">
                                <span>❤️</span>
                                منحة الأسر المتعففة
                            </button>
                            <button class="option-btn" onclick="showGrantInfo('منحة أبناء الشهداء')">
                                <span>🇵🇸</span>
                                منحة أبناء الشهداء
                            </button>
                        </div>
                        <div class="feedback-message" id="grants-feedback"></div>
                        <button id="back-to-map-btn" class="action-button hidden" onclick="nextScene('map-scene')">
                            العودة للخريطة
                        </button>
                    </div>
                </div>

                <div id="grants-info-scene" class="game-stage hidden">
                    <img src="https://i.ibb.co/q5kYgRz/Grants-info.webp" alt="معلومات عن المنح" class="scene-image">
                    <div class="scene-content">
                        <div class="info-header">
                            <h2 class="scene-title" id="grant-info-title"></h2>
                            <p id="grant-info-desc"></p>
                        </div>
                        <div class="info-scene-container" id="grant-details-container">
                            </div>
                        <div class="info-footer">
                            <button class="action-button" onclick="nextScene('grants-scene')">
                                العودة للمنح
                                <span class="btn-icon">⬅️</span>
                            </button>
                        </div>
                    </div>
                </div>

                <div id="exchange-scene" class="game-stage hidden">
                    <img src="https://i.ibb.co/v4cW37p/Exchange.webp" alt="صورة برامج التبادل" class="scene-image">
                    <div class="scene-content">
                        <h2 class="scene-title">برامج التبادل الطلابي</h2>
                        <p>تُقدم الجامعة برامج تبادل مع عدة جامعات دولية. اختر البرنامج لتعرف عنه المزيد.</p>
                        <div class="options-container">
                            <button class="option-btn" onclick="showExchangeInfo('الجامعة الإسلامية الماليزية')">
                                <span>🇲🇾</span>
                                برنامج التبادل مع ماليزيا
                            </button>
                            <button class="option-btn" onclick="showExchangeInfo('الجامعة الأوروبية')">
                                <span>🇪🇺</span>
                                برنامج التبادل مع أوروبا
                            </button>
                        </div>
                        <div class="feedback-message" id="exchange-feedback"></div>
                        <button id="back-to-map-btn" class="action-button hidden" onclick="nextScene('map-scene')">
                            العودة للخريطة
                        </button>
                    </div>
                </div>

                <div id="exchange-info-scene" class="game-stage hidden">
                    <img src="https://i.ibb.co/L51R8gD/Exchange-info.webp" alt="معلومات عن التبادل" class="scene-image">
                    <div class="scene-content">
                        <div class="info-header">
                            <h2 class="scene-title" id="exchange-info-title"></h2>
                            <p id="exchange-info-desc"></p>
                        </div>
                        <div class="info-scene-container" id="exchange-details-container">
                            </div>
                        <div class="info-footer">
                            <button class="action-button" onclick="nextScene('exchange-scene')">
                                العودة لبرامج التبادل
                                <span class="btn-icon">⬅️</span>
                            </button>
                        </div>
                    </div>
                </div>

                <div id="admission-scene" class="game-stage hidden">
                    <img src="https://i.ibb.co/k2c5g97/Admission.webp" alt="شروط القبول" class="scene-image">
                    <div class="scene-content">
                        <h2 class="scene-title">شروط القبول</h2>
                        <p>أجب عن الأسئلة التالية لمعرفة مدى استعدادك للتقديم:</p>
                        <div id="quiz-container">
                            </div>
                        <div class="feedback-message" id="admission-feedback"></div>
                        <button id="back-to-map-btn" class="action-button hidden" onclick="nextScene('map-scene')">
                            العودة للخريطة
                        </button>
                    </div>
                </div>

                <div id="end-scene" class="game-stage hidden">
                    <img src="https://i.ibb.co/Bq9p6Vz/End.webp" alt="صورة النهاية" class="scene-image">
                    <div class="scene-content">
                        <h2 class="scene-title">تهانينا! لقد أنهيت رحلتك.</h2>
                        <p id="final-score-message">
                            يا <span id="final-player-name"></span>، لقد جمعت <span id="final-player-score">0</span> نقطة.
                        </p>
                        <p>شكراً لاهتمامك بالجامعة الإسلامية. نتمنى لك التوفيق في رحلتك التعليمية القادمة!</p>
                        <button class="action-button" onclick="resetGame()">ابدأ من جديد</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="feedback-modal" class="modal hidden">
            <div class="modal-content" id="modal-content">
                <h2 id="modal-title"></h2>
                <p id="modal-text"></p>
                <button class="action-button" onclick="closeModal()">موافق</button>
            </div>
        </div>
    </div>
    
    <audio id="click-sound" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" preload="auto"></audio>
    <audio id="correct-sound" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3" preload="auto"></audio>
    <audio id="incorrect-sound" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3" preload="auto"></audio>

    <script>
        // ملفات الصوت
        const clickSound = document.getElementById('click-sound');
        const correctSound = document.getElementById('correct-sound');
        const incorrectSound = document.getElementById('incorrect-sound');

        // البيانات
        const gameData = {
            playerName: '',
            playerScore: 0,
            progress: 0,
            currentQuizQuestion: 0,
        };

        const scenes = {
            'landing-screen': document.getElementById('landing-screen'),
            'start-screen': document.getElementById('start-screen'),
            'main-game': document.getElementById('main-game'),
            'map-scene': document.getElementById('map-scene'),
            'faculties-scene': document.getElementById('faculties-scene'),
            'faculties-info-scene': document.getElementById('faculties-info-scene'),
            'grants-scene': document.getElementById('grants-scene'),
            'grants-info-scene': document.getElementById('grants-info-scene'),
            'exchange-scene': document.getElementById('exchange-scene'),
            'exchange-info-scene': document.getElementById('exchange-info-scene'),
            'admission-scene': document.getElementById('admission-scene'),
            'end-scene': document.getElementById('end-scene')
        };

        const quizQuestions = [
            {
                question: 'هل لديك شهادة الثانوية العامة بتقدير جيد جداً على الأقل؟',
                options: ['نعم', 'لا'],
                correctAnswer: 'نعم',
                points: 20
            },
            {
                question: 'هل اجتزت اختبارات القبول والمقابلات الشخصية المطلوبة؟',
                options: ['نعم', 'لا'],
                correctAnswer: 'نعم',
                points: 20
            },
            {
                question: 'هل تسعى للتعرف على المزيد من المعلومات عن الحياة الجامعية؟',
                options: ['نعم', 'لا'],
                correctAnswer: 'نعم',
                points: 10
            }
        ];

        // عناصر الواجهة
        const playerNameInput = document.getElementById('playerName');
        const startButton = document.getElementById('startButton');
        const playerNameDisplay = document.getElementById('player-name-display');
        const playerScoreDisplay = document.getElementById('player-score');
        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progressText');
        const quizContainer = document.getElementById('quiz-container');
        const feedbackModal = document.getElementById('feedback-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalText = document.getElementById('modal-text');
        
        // البيانات
        const facultyData = {
            'الشريعة والقانون': {
                description: 'تهدف الكلية إلى إعداد جيل واعٍ بالشريعة الإسلامية، ومؤهل للتعامل مع التحديات القانونية المعاصرة.',
                majors: [
                    { name: 'الفقه المقارن', icon: '⚖️' },
                    { name: 'القانون الخاص', icon: '📜' },
                    { name: 'القانون العام', icon: '🏛️' },
                    { name: 'أصول الدين', icon: '🕌' }
                ]
            },
            'الهندسة': {
                description: 'تقدم الكلية برامج هندسية حديثة تجمع بين النظرية والتطبيق لتلبية احتياجات سوق العمل.',
                majors: [
                    { name: 'الهندسة المدنية', icon: '🏗️' },
                    { name: 'هندسة العمارة', icon: '📐' },
                    { name: 'هندسة الكهرباء', icon: '💡' },
                    { name: 'هندسة الاتصالات', icon: '📡' },
                    { name: 'هندسة الحاسوب', icon: '💻' }
                ]
            },
            'الطب': {
                description: 'تعتبر كلية الطب من الكليات الرائدة في مجال التعليم الطبي، وتساهم في إعداد أطباء أكفاء.',
                majors: [
                    { name: 'الطب البشري', icon: '🩺' },
                    { name: 'طب الأسنان', icon: '🦷' },
                    { name: 'الصيدلة', icon: '💊' },
                    { name: 'التمريض', icon: '🩹' }
                ]
            },
            'الآداب': {
                description: 'توفر الكلية بيئة أكاديمية ممتازة لتعزيز الإبداع الفكري والأدبي.',
                majors: [
                    { name: 'اللغة العربية', icon: '📝' },
                    { name: 'التاريخ', icon: '🕰️' },
                    { name: 'الجغرافيا', icon: '🗺️' },
                    { name: 'علم النفس', icon: '🧠' }
                ]
            },
            'التجارة': {
                description: 'تهدف الكلية إلى تزويد الطلاب بالمعرفة والمهارات اللازمة للعمل في القطاعين الاقتصادي والتجاري.',
                majors: [
                    { name: 'المحاسبة', icon: '💰' },
                    { name: 'إدارة الأعمال', icon: '📊' },
                    { name: 'التسويق', icon: '📈' },
                    { name: 'العلوم المالية', icon: '💵' }
                ]
            }
        };

        const grantData = {
            'منحة التفوق الأكاديمي': {
                description: 'مخصصة للطلاب المتفوقين في الثانوية العامة.',
                details: [
                    { title: 'النسبة المئوية', value: '100%' },
                    { title: 'شروط التقديم', details: ['معدل 95% فما فوق', 'تقديم شهادة الثانوية'] },
                    { title: 'المميزات', details: ['تغطية الرسوم الدراسية بالكامل', 'فرص للمشاركة في أبحاث'] }
                ]
            },
            'منحة الأسر المتعففة': {
                description: 'تُمنح للطلاب من الأسر ذات الدخل المحدود لمساعدتهم على استكمال دراستهم.',
                details: [
                    { title: 'النسبة المئوية', value: '50-75%' },
                    { title: 'شروط التقديم', details: ['إثبات دخل الأسرة', 'دراسة اجتماعية للحالة'] },
                    { title: 'المميزات', details: ['تخفيض كبير على الرسوم', 'دعم مادي إضافي في بعض الحالات'] }
                ]
            },
            'منحة أبناء الشهداء': {
                description: 'تكريماً لتضحيات أبناء الوطن، تُقدم الجامعة هذه المنحة.',
                details: [
                    { title: 'النسبة المئوية', value: '100%' },
                    { title: 'شروط التقديم', details: ['تقديم ما يثبت وضع الطالب', 'إرفاق شهادة الوفاة'] },
                    { title: 'المميزات', details: ['تغطية الرسوم الدراسية بالكامل', 'أولوية في بعض البرامج'] }
                ]
            }
        };

        const exchangeData = {
            'الجامعة الإسلامية الماليزية': {
                description: 'برنامج تبادل ثقافي وأكاديمي لتعزيز العلاقات مع الجامعات الآسيوية.',
                details: [
                    { title: 'مدة البرنامج', value: 'فصل دراسي واحد' },
                    { title: 'المشاريع', details: ['مشروع بحثي مشترك', 'مشروع ثقافي'] }
                ]
            },
            'الجامعة الأوروبية': {
                description: 'فرصة فريدة للطلاب للتعرف على نظام التعليم الأوروبي والاندماج في بيئة دولية.',
                details: [
                    { title: 'مدة البرنامج', value: 'سنة أكاديمية كاملة' },
                    { title: 'المشاريع', details: ['مشاركة في مؤتمرات دولية', 'تدريب عملي في شركات أوروبية'] }
                ]
            }
        };

        // وظائف اللعبة
        function saveGame() {
            localStorage.setItem('gameData', JSON.stringify(gameData));
        }

        function loadGame() {
            const savedData = localStorage.getItem('gameData');
            if (savedData) {
                Object.assign(gameData, JSON.parse(savedData));
                playerNameInput.value = gameData.playerName;
                playerNameDisplay.textContent = gameData.playerName;
                playerScoreDisplay.textContent = gameData.playerScore;
                updateProgressBar();
                showScreen('main-game');
                nextScene('map-scene');
            } else {
                showScreen('landing-screen');
            }
        }

        function showScreen(screenId) {
            for (const key in scenes) {
                if (scenes.hasOwnProperty(key)) {
                    scenes[key].classList.add('hidden');
                }
            }
            scenes[screenId].classList.remove('hidden');
        }

        function showStartScreen() {
            showScreen('start-screen');
            // تأكد من تشغيل أي صوت عند أول تفاعل
            try {
                clickSound.play();
                clickSound.pause();
                clickSound.currentTime = 0;
            } catch (e) {
                console.log('Audio playback prevented by browser.');
            }
        }

        function startGame() {
            gameData.playerName = playerNameInput.value;
            if (gameData.playerName.trim() === '') {
                return;
            }
            gameData.playerScore = 0;
            gameData.progress = 0;
            gameData.currentQuizQuestion = 0;
            saveGame();
            playerNameDisplay.textContent = gameData.playerName;
            playerScoreDisplay.textContent = gameData.playerScore;
            updateProgressBar();
            showScreen('main-game');
            nextScene('map-scene');
        }

        function nextScene(sceneId) {
            clickSound.play().catch(e => console.log('Click sound failed to play:', e));
            
            // تحديث شريط التقدم
            if (sceneId !== 'end-scene') {
                updateProgress(10);
            }

            // إخفاء زر العودة للخريطة إذا كان موجودًا
            const backBtn = document.getElementById('back-to-map-btn');
            if (backBtn) {
                backBtn.classList.add('hidden');
            }

            // عرض المشهد الجديد
            for (const key in scenes) {
                if (key !== 'main-game' && key !== 'player-stats') {
                    scenes[key].classList.add('hidden');
                }
            }
            scenes[sceneId].classList.remove('hidden');

            // إذا كان المشهد هو "شروط القبول" (admission-scene)
            if (sceneId === 'admission-scene') {
                renderQuizQuestion();
            }
        }
        
        function updateProgressBar() {
            const totalStages = 8; // عدد المراحل الكلية
            const completedStages = gameData.progress / 10;
            const percentage = (completedStages / totalStages) * 100;
            
            progressBar.style.width = percentage + '%';
            progressText.textContent = `${Math.round(percentage)}%`;

            // إذا تم الانتهاء من جميع المراحل
            if (completedStages >= totalStages) {
                endGame();
            }
        }

        function updateProgress(value) {
            gameData.progress += value;
            saveGame();
            updateProgressBar();
        }

        function showFeedback(message, type) {
            modalTitle.textContent = type === 'correct' ? 'إجابة صحيحة!' : (type === 'incorrect' ? 'إجابة خاطئة!' : 'تنبيه');
            modalText.textContent = message;
            feedbackModal.classList.remove('hidden');
        }

        function closeModal() {
            feedbackModal.classList.add('hidden');
        }

        function resetGame() {
            localStorage.clear();
            gameData.playerName = '';
            gameData.playerScore = 0;
            gameData.progress = 0;
            gameData.currentQuizQuestion = 0;
            showScreen('landing-screen');
            playerNameInput.value = '';
            startButton.disabled = true;
        }

        function logout() {
            resetGame();
        }

        function endGame() {
            document.getElementById('final-player-name').textContent = gameData.playerName;
            document.getElementById('final-player-score').textContent = gameData.playerScore;
            showScreen('end-scene');
            localStorage.clear();
        }

        function renderQuizQuestion() {
            quizContainer.innerHTML = '';
            const backBtn = document.getElementById('back-to-map-btn');
            backBtn.classList.add('hidden');
            
            if (gameData.currentQuizQuestion < quizQuestions.length) {
                const q = quizQuestions[gameData.currentQuizQuestion];
                const questionElement = document.createElement('div');
                questionElement.className = 'quiz-question';
                questionElement.innerHTML = `<p>${q.question}</p>`;
                
                const optionsContainer = document.createElement('div');
                optionsContainer.className = 'options-container';
                
                q.options.forEach(option => {
                    const button = document.createElement('button');
                    button.textContent = option;
                    button.className = 'option-btn';
                    button.onclick = () => checkQuizAnswer(option, q.correctAnswer, q.points);
                    optionsContainer.appendChild(button);
                });
                
                questionElement.appendChild(optionsContainer);
                quizContainer.appendChild(questionElement);
            } else {
                quizContainer.innerHTML = '<p>لقد أنهيت أسئلة القبول. يمكنك العودة الآن للخريطة!</p>';
                backBtn.classList.remove('hidden');
            }
        }

        function checkQuizAnswer(selectedOption, correctAnswer, points) {
            const isCorrect = (selectedOption === correctAnswer);
            const feedbackMsg = isCorrect ? `إجابة صحيحة! لقد ربحت ${points} نقطة.` : `إجابة خاطئة. حاول مجدداً.`;

            if (isCorrect) {
                gameData.playerScore += points;
                playerScoreDisplay.textContent = gameData.playerScore;
                correctSound.play().catch(e => console.log('Correct sound failed to play:', e));
            } else {
                incorrectSound.play().catch(e => console.log('Incorrect sound failed to play:', e));
            }
            
            showFeedback(feedbackMsg, isCorrect ? 'correct' : 'incorrect');

            if (isCorrect) {
                gameData.currentQuizQuestion++;
            }
            saveGame();
            renderQuizQuestion();
        }

        function showFacultyInfo(facultyName) {
            nextScene('faculties-info-scene');
            const data = facultyData[facultyName];
            document.getElementById('faculty-info-title').textContent = facultyName;
            document.getElementById('faculty-info-desc').textContent = data.description;
            
            const majorsContainer = document.getElementById('faculty-majors-container');
            majorsContainer.innerHTML = '';
            data.majors.forEach(major => {
                const card = document.createElement('div');
                card.className = 'college-card';
                card.innerHTML = `<span class="college-icon">${major.icon}</span><h3>${major.name}</h3>`;
                majorsContainer.appendChild(card);
            });
        }

        function showGrantInfo(grantName) {
            nextScene('grants-info-scene');
            const data = grantData[grantName];
            document.getElementById('grant-info-title').textContent = grantName;
            document.getElementById('grant-info-desc').textContent = data.description;

            const detailsContainer = document.getElementById('grant-details-container');
            detailsContainer.innerHTML = '';
            data.details.forEach(detail => {
                const card = document.createElement('div');
                card.className = 'grant-card';
                let detailsHTML = '';
                if (Array.isArray(detail.details)) {
                    detailsHTML = `<ul>${detail.details.map(item => `<li>${item}</li>`).join('')}</ul>`;
                } else if (detail.value) {
                    detailsHTML = `<div class="grant-percentage">${detail.value}</div>`;
                }
                card.innerHTML = `<h3>${detail.title}</h3>${detailsHTML}`;
                detailsContainer.appendChild(card);
            });
        }

        function showExchangeInfo(exchangeName) {
            nextScene('exchange-info-scene');
            const data = exchangeData[exchangeName];
            document.getElementById('exchange-info-title').textContent = exchangeName;
            document.getElementById('exchange-info-desc').textContent = data.description;

            const detailsContainer = document.getElementById('exchange-details-container');
            detailsContainer.innerHTML = '';
            data.details.forEach(detail => {
                const card = document.createElement('div');
                card.className = 'exchange-card';
                let detailsHTML = '';
                if (Array.isArray(detail.details)) {
                    detailsHTML = `<ul>${detail.details.map(item => `<li>${item}</li>`).join('')}</ul>`;
                } else if (detail.value) {
                    detailsHTML = `<p>${detail.value}</p>`;
                }
                card.innerHTML = `<h3>${detail.title}</h3>${detailsHTML}`;
                detailsContainer.appendChild(card);
            });
        }

        playerNameInput.addEventListener('input', () => {
            startButton.disabled = playerNameInput.value.trim() === '';
        });

        startButton.addEventListener('click', startGame);

        window.onload = loadGame;
    </script>
</body>
</html>
